import{d as G,g as t,h as I,i as F,c as x,a as n,t as k,j as B,F as C,k as D,n as L,l as O,o as m,m as V,_ as z}from"./index-BClisfGF.js";const H={class:"header"},K={class:"stats"},N=["disabled"],R={class:"game-board"},U={key:0,class:"game-over-overlay"},o=20,j=G({__name:"SnakeGame",setup(E){O(e=>({"6211e9f0":o}));const c=t(200),l=t([{x:10,y:10}]),i=t({x:15,y:15}),s=t({x:0,y:-1}),f=t(0),v=t(!1),y=t(!1),p=t(null);let d;function M(){v.value||(l.value=[{x:10,y:10}],s.value={x:0,y:-1},f.value=0,y.value=!1,v.value=!0,h(),d=setInterval(_,c.value),L(()=>{p.value?.focus()}))}function _(){if(!v.value)return;const e={...l.value[0]};if(e.x+=s.value.x,e.y+=s.value.y,e.x<0||e.x>=o||e.y<0||e.y>=o){g();return}if(l.value.slice(1).some(a=>a.x===e.x&&a.y===e.y)){g();return}l.value.unshift(e),e.x===i.value.x&&e.y===i.value.y?(f.value++,c.value>80&&(c.value-=5),clearInterval(d),d=setInterval(_,c.value),h()):l.value.pop()}function h(){let e;do e={x:Math.floor(Math.random()*o),y:Math.floor(Math.random()*o)};while(l.value.some(a=>a.x===e.x&&a.y===e.y));i.value=e}function g(){v.value=!1,y.value=!0,clearInterval(d)}function S(e,a){return!l.value||l.value.length===0?"":l.value[0].x===e&&l.value[0].y===a?s.value.y===-1?"snake-head dir-up":s.value.y===1?"snake-head dir-down":s.value.x===-1?"snake-head dir-left":s.value.x===1?"snake-head dir-right":"snake-head":l.value.some((u,w)=>w!==0&&u.x===e&&u.y===a)?"snake":i.value.x===e&&i.value.y===a?"food":""}function b(e){e.preventDefault();const r={ArrowUp:{x:0,y:-1},w:{x:0,y:-1},ArrowDown:{x:0,y:1},s:{x:0,y:1},ArrowLeft:{x:-1,y:0},a:{x:-1,y:0},ArrowRight:{x:1,y:0},d:{x:1,y:0}}[e.key];r&&(r.x===-s.value.x&&r.y===-s.value.y||(s.value=r))}return I(()=>{p.value?.focus()}),F(()=>{clearInterval(d)}),(e,a)=>(m(),x("div",{class:"game-container",onKeydown:b,tabindex:"0",ref_key:"gameArea",ref:p},[n("div",H,[a[0]||(a[0]=n("h1",null,"贪吃蛇",-1)),n("div",K,[n("span",null,"分数: "+k(f.value),1),n("button",{onClick:M,disabled:v.value},k(y.value?"重新开始":"开始游戏"),9,N)])]),n("div",R,[(m(),x(C,null,D(o,(r,u)=>n("div",{key:u,class:"row"},[(m(),x(C,null,D(o,(w,A)=>n("div",{key:A,class:V([S(A,u),"cell"])},null,2)),64))])),64)),y.value?(m(),x("div",U,[a[1]||(a[1]=n("h2",null,"游戏结束",-1)),n("p",null,"你的分数: "+k(f.value),1)])):B("",!0)]),a[2]||(a[2]=n("div",{class:"controls"},[n("p",null,"使用方向键或 W/A/S/D 控制方向")],-1))],544))}}),T=z(j,[["__scopeId","data-v-e8319fcf"]]);export{T as default};

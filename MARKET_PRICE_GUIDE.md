# 市场价格模块使用指南

## 功能概述

市场价格模块是一个用于展示游戏内商品市场价格信息的页面，包含以下功能：

- 📊 实时数据展示
- 📈 ECharts图表可视化
- 📱 响应式设计
- 🔄 数据刷新功能
- 📋 详细商品信息表格

## 访问方式

1. 在主页点击"市场价格"卡片
2. 或直接访问 `/market` 路径

## 数据来源

- **主要数据源**: `https://www.moyu-idle.com/api/game/market/price`
- **备用数据**: 内置模拟数据（当API不可用时自动使用）

## 页面功能

### 1. 统计卡片
- **商品总数**: 显示所有商品的数量
- **有出售订单**: 显示有出售订单的商品数量
- **有求购订单**: 显示有求购订单的商品数量

### 2. 图表展示
- **价格分布图**: 柱状图展示各商品的出售价格和求购价格
- **订单数量分布图**: 饼图展示有出售订单、有求购订单和无订单的商品比例

### 3. 详细表格
展示每个商品的详细信息：
- 商品名称
- 最低出售价及对应数量
- 总出售数量和出售订单数
- 最高求购价及对应数量
- 总求购数量和求购订单数

## 数据字段说明

| 字段名 | 说明 |
|--------|------|
| 商品名称 | 商品的名称 |
| 最低出售价 | 市场上该商品的最低出售价格 |
| 最低出售数量 | 最低价格对应的商品数量 |
| 总出售数量 | 该商品在市场上的总出售数量 |
| 出售订单数 | 该商品的出售订单总数 |
| 最高求购价 | 市场上该商品的最高求购价格 |
| 最高求购数量 | 最高价格对应的求购数量 |
| 总求购数量 | 该商品的总求购数量 |
| 求购订单数 | 该商品的求购订单总数 |

## 技术实现

### 前端技术栈
- Vue 3 + TypeScript
- ECharts 图表库
- Vue Router 路由管理

### 核心功能
1. **数据获取**: 使用fetch API获取市场价格数据
2. **图表渲染**: 使用ECharts创建交互式图表
3. **响应式设计**: 适配不同屏幕尺寸
4. **错误处理**: API失败时自动使用模拟数据

### 文件结构
```
src/
├── views/market/
│   └── MarketPrice.vue          # 市场价格页面
├── utils/
│   └── mockData.ts              # 模拟数据
└── components/
    └── Navigation.vue           # 导航组件
```

## 开发说明

### 添加新的图表类型
1. 在 `initCharts()` 函数中添加新的图表配置
2. 使用ECharts的API创建图表实例
3. 设置相应的数据源和样式

### 修改数据源
1. 更新 `fetchMarketData()` 函数中的API地址
2. 调整数据格式处理逻辑
3. 更新TypeScript接口定义

### 自定义样式
1. 修改 `<style scoped>` 部分的CSS
2. 调整图表配置中的颜色和样式
3. 更新响应式断点

## 故障排除

### 常见问题

1. **图表不显示**
   - 检查ECharts是否正确安装
   - 确认DOM元素是否正确渲染

2. **数据加载失败**
   - 检查网络连接
   - 确认API地址是否正确
   - 查看浏览器控制台错误信息

3. **页面样式异常**
   - 检查CSS类名是否正确
   - 确认样式文件是否正确加载

### 调试技巧

1. 打开浏览器开发者工具
2. 查看Console面板的错误信息
3. 检查Network面板的API请求状态
4. 使用Vue DevTools调试组件状态

## 扩展建议

1. **添加筛选功能**: 按价格范围、商品类型等筛选
2. **添加排序功能**: 按价格、数量等字段排序
3. **添加搜索功能**: 快速查找特定商品
4. **添加历史记录**: 显示价格变化趋势
5. **添加通知功能**: 价格变化时发送通知 